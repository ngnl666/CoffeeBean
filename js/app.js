(function(t){function e(e){for(var o,r,s=e[0],u=e[1],i=e[2],l=0,d=[];l<s.length;l++)r=s[l],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&d.push(a[r][0]),a[r]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(t[o]=u[o]);p&&p(e);while(d.length)d.shift()();return c.push.apply(c,i||[]),n()}function n(){for(var t,e=0;e<c.length;e++){for(var n=c[e],o=!0,r=1;r<n.length;r++){var s=n[r];0!==a[s]&&(o=!1)}o&&(c.splice(e--,1),t=u(u.s=n[0]))}return t}var o={},r={app:0},a={app:0},c=[];function s(t){return u.p+"js/"+({}[t]||t)+".js"}function u(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(t){var e=[],n={"chunk-09344580":1,"chunk-110248fd":1,"chunk-11929734":1,"chunk-11cf3ba1":1,"chunk-15f08a72":1,"chunk-26606b68":1,"chunk-34aaf793":1,"chunk-47a7e30e":1,"chunk-bbf6d3ec":1,"chunk-578696d2":1,"chunk-588e8660":1,"chunk-658c018b":1,"chunk-76569f02":1,"chunk-7b52152c":1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise((function(e,n){for(var o="css/"+({}[t]||t)+".css",a=u.p+o,c=document.getElementsByTagName("link"),s=0;s<c.length;s++){var i=c[s],l=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(l===o||l===a))return e()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){i=d[s],l=i.getAttribute("data-href");if(l===o||l===a)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var o=e&&e.target&&e.target.src||a,c=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=o,delete r[t],p.parentNode.removeChild(p),n(c)},p.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){r[t]=0})));var o=a[t];if(0!==o)if(o)e.push(o[2]);else{var c=new Promise((function(e,n){o=a[t]=[e,n]}));e.push(o[2]=c);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=s(t);var d=new Error;i=function(e){l.onerror=l.onload=null,clearTimeout(p);var n=a[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",d.name="ChunkLoadError",d.type=o,d.request=r,n[1](d)}a[t]=void 0}};var p=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(e)},u.m=t,u.c=o,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)u.d(n,o,function(e){return t[e]}.bind(null,o));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/CoffeeBean/",u.oe=function(t){throw console.error(t),t};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var d=0;d<i.length;d++)e(i[d]);var p=l;c.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"277b":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("b0c0"),n("ac1f"),n("1276");var o=n("7a23");function r(t,e){var n=Object(o["resolveComponent"])("router-view");return Object(o["openBlock"])(),Object(o["createBlock"])(n)}n("c1b5");const a={};a.render=r;var c=a,s=(n("d3b7"),n("3ca3"),n("ddb0"),n("6c02")),u=[{path:"/",name:"Home",component:function(){return n.e("chunk-34aaf793").then(n.bind(null,"bb51"))}},{path:"/shop",name:"Shop",component:function(){return n.e("chunk-11929734").then(n.bind(null,"0fa5"))},children:[{path:":list",name:"List",component:function(){return n.e("chunk-11929734").then(n.bind(null,"0fa5"))}},{path:":list/:item",name:"Item",component:function(){return n.e("chunk-11929734").then(n.bind(null,"0fa5"))}}]},{path:"/cart",name:"Cart",component:function(){return Promise.all([n.e("chunk-47a7e30e"),n.e("chunk-bbf6d3ec")]).then(n.bind(null,"b789"))},children:[{path:"customer_cart",name:"CustomerCart",component:function(){return n.e("chunk-588e8660").then(n.bind(null,"4141"))}},{path:"customer_imformation",name:"CustomerImformation",component:function(){return n.e("chunk-47a7e30e").then(n.bind(null,"9a9d"))}},{path:"customer_order",name:"CustomerOrder",component:function(){return n.e("chunk-15f08a72").then(n.bind(null,"eb70"))}}]},{path:"/detail/:productId",name:"DetailCard",component:function(){return n.e("chunk-76569f02").then(n.bind(null,"6929"))}},{path:"/favorite",name:"Favorite",component:function(){return n.e("chunk-110248fd").then(n.bind(null,"a09f"))}},{path:"/pick",name:"Pick",component:function(){return n.e("chunk-26606b68").then(n.bind(null,"4a20"))}},{path:"/login",name:"Login",component:function(){return n.e("chunk-578696d2").then(n.bind(null,"a55b"))}},{path:"/admin",name:"admin",component:function(){return n.e("chunk-11cf3ba1").then(n.bind(null,"7277"))},children:[{path:"productlist",name:"ProductList",component:function(){return n.e("chunk-658c018b").then(n.bind(null,"96fc"))},meta:{requiresAuth:!0}},{path:"coupon",name:"Coupon",component:function(){return n.e("chunk-7b52152c").then(n.bind(null,"e5bd"))},meta:{requiresAuth:!0}},{path:"order",name:"Order",component:function(){return n.e("chunk-09344580").then(n.bind(null,"cf2a"))},meta:{requiresAuth:!0}}]},{path:"/:pathMatch(.*)*",name:"NotFound",component:function(){return n.e("chunk-34aaf793").then(n.bind(null,"bb51"))}}],i=Object(s["a"])({history:Object(s["b"])(),routes:u}),l=i,d=n("b85c"),p=n("3835"),f=n("2909"),h=(n("99af"),n("4ec9"),n("d81d"),n("159b"),n("a630"),n("caad"),n("2532"),n("a434"),n("1940")),m=n.n(h),g=n("5502"),b=n("bc3a"),v=n.n(b),C={namespaced:!0,state:function(){return{products:[],coupons:[],orders:[]}},mutations:{setProducts:function(t,e){t.products=e},setCoupons:function(t,e){t.coupons=e},setOrders:function(t,e){t.orders=e}},actions:{getProducts:function(t){var e=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o="".concat("https://vue-course-api.hexschool.io","/api/").concat("coffeebean","/admin/products?page=").concat(n);e("setIsLoading",!0,{root:!0}),v.a.get(o).then((function(t){if(!t.data.success)return e("setAlertMsg","取得商品列表失敗",{root:!0}),void e("setIsAlert",null,{root:!0});e("setIsLoading",!1,{root:!0}),e("setProducts",t.data.products),e("setPagination",t.data.pagination,{root:!0})})).catch((function(t){return console.log(t.message)}))},getCoupons:function(t){var e=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o="".concat("https://vue-course-api.hexschool.io","/api/").concat("coffeebean","/admin/coupons?page=").concat(n);e("setIsLoading",!0,{root:!0}),v.a.get(o).then((function(t){if(!t.data.success)return e("setAlertMsg","取得優惠券列表失敗",{root:!0}),void e("setIsAlert",null,{root:!0});e("setIsLoading",!1,{root:!0}),e("setCoupons",t.data.coupons),e("setPagination",t.data.pagination,{root:!0})})).catch((function(t){return console.log(t.message)}))},getOrders:function(t){var e=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o="".concat("https://vue-course-api.hexschool.io","/api/").concat("coffeebean","/admin/orders?page=").concat(n);e("setIsLoading",!0,{root:!0}),v.a.get(o).then((function(t){if(!t.data.success)return e("setAlertMsg","取得訂單列表失敗",{root:!0}),void e("setIsAlert",null,{root:!0});t.data.orders.shift(),e("setIsLoading",!1,{root:!0}),e("setOrders",t.data.orders),e("setPagination",t.data.pagination,{root:!0})})).catch((function(t){return console.log(t.message)}))}}},A={namespaced:!0,state:function(){var t;return{bgActive:!1,products:[],staredProducts:[],myCoupons:[],tempCart:new Map(null===(t=JSON.parse(localStorage.getItem("storageCart")))||void 0===t?void 0:t.map((function(t){return[t[0],t[1]]}))),carts:[],couponCode:"",finalTotal:"",orderId:"",formData:"",buttonEnabled:!1,jumped:!1,order:{},pagination:{}}},getters:{myCart:function(t){var e=Object(f["a"])(t.tempCart),n=[];return e.forEach((function(e){var o=Object(p["a"])(e,2),r=o[0],a=o[1];t.products.forEach((function(t){r===t.id&&n.push({title:t.title,qty:a,product_id:r,unit:t.unit,original_price:t.original_price,price:t.price})}))})),n},cartNum:function(t){return Array.from(t.tempCart).length}},mutations:{setBgActive:function(t,e){t.bgActive=e},setProducts:function(t,e){t.staredProducts=JSON.parse(localStorage.getItem("staredId"))||[];var n,o=Object(d["a"])(e);try{for(o.s();!(n=o.n()).done;){var r=n.value;t.staredProducts.includes(r.id)?r.stared=!0:r.stared=!1}}catch(a){o.e(a)}finally{o.f()}t.products=e},setStaredProducts:function(t,e){e.stared=!0,t.staredProducts.push(e.id),localStorage.setItem("staredId",JSON.stringify(t.staredProducts))},removeStaredProducts:function(t,e){var n=t.staredProducts.indexOf(e.id);e.stared=!1,t.staredProducts.splice(n,1),localStorage.setItem("staredId",JSON.stringify(t.staredProducts))},setMyCoupons:function(t,e){t.myCoupons=JSON.parse(localStorage.getItem("myCoupons"))||[],t.myCoupons.push(e)},setTempCart:function(t,e){if(t.tempCart.get(e.product_id)){var n=t.tempCart.get(e.product_id);null!==e&&void 0!==e&&e.change?n=e.qty:n+=e.qty,t.tempCart.set(e.product_id,n),localStorage.setItem("storageCart",JSON.stringify(Object(f["a"])(t.tempCart)))}else t.tempCart.set(e.product_id,e.qty),localStorage.setItem("storageCart",JSON.stringify(Object(f["a"])(t.tempCart)))},delTempCart:function(t,e){t.tempCart.delete(e),localStorage.setItem("storageCart",JSON.stringify(Object(f["a"])(t.tempCart)))},delAllTempCart:function(t){t.tempCart=new Map},setCart:function(t,e){t.carts=e},setFinalTotal:function(t,e){t.finalTotal=Math.round(e)},setCouponCode:function(t,e){t.couponCode=e},setOrderId:function(t,e){t.orderId=e},setFormData:function(t,e){t.formData=e},setOrder:function(t,e){t.order=e},setPaid:function(t,e){t.order.is_paid=e},setJumped:function(t,e){t.jumped=e},setButtonEnabled:function(t,e){t.buttonEnabled=e},setPagination:function(t,e){t.pagination={total_pages:e.total_pages,current_page:e.current_page,has_pre:1!==e.current_page,has_next:e.current_page!==e.total_pages,category:null,products:e.products}}},actions:{getProducts:function(t){var e=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o="".concat("https://vue-course-api.hexschool.io","/api/").concat("coffeebean","/products/all");e("setIsLoading",!0,{root:!0}),v.a.get(o).then((function(t){if(!t.data.success)return e("setAlertMsg","取得商品失敗",{root:!0}),void e("setIsAlert",null,{root:!0});e("setProducts",t.data.products),e("setPagination",{total_pages:Math.ceil(t.data.products.length/6),current_page:n}),e("setIsLoading",!1,{root:!0})})).catch((function(t){console.log(t.message)}))},getCart:function(t){var e=t.commit,n="".concat("https://vue-course-api.hexschool.io","/api/").concat("coffeebean","/cart");e("setIsLoading",!0,{root:!0}),v.a.get(n).then((function(t){if(!t.data.success)return e("setAlertMsg","取得購物車列表失敗",{root:!0}),void e("setIsAlert",null,{root:!0});e("setCart",t.data.data.carts),e("setIsLoading",!1,{root:!0})})).catch((function(t){console.log(t.message)}))},addCart:function(t,e){var n=t.commit,o="".concat("https://vue-course-api.hexschool.io","/api/").concat("coffeebean","/cart");v.a.post(o,{data:e}).then((function(t){if(!t.data.success)return n("setAlertMsg","商品加入失敗",{root:!0}),void n("setIsAlert",null,{root:!0});n("setAlertMsg","商品加入成功!",{root:!0}),n("setIsAlert",null,{root:!0})})).catch((function(t){console.log(t.message)}))},deleteCartItem:function(t,e){var n=t.commit,o="".concat("https://vue-course-api.hexschool.io","/api/").concat("coffeebean","/cart/").concat(e);v.a.delete(o).then((function(t){if(!t.data.success)return n("setAlertMsg","刪除商品失敗",{root:!0}),void n("setIsAlert",null,{root:!0});n("setAlertMsg","刪除成功!",{root:!0}),n("setIsAlert",null,{root:!0})})).catch((function(t){return console.log(t.message)}))},applyCoupon:function(t,e){var n=t.commit,o="".concat("https://vue-course-api.hexschool.io","/api/").concat("coffeebean","/coupon");v.a.post(o,{data:{code:e}}).then((function(t){if(!t.data.success)return n("setAlertMsg",t.data.message,{root:!0}),void n("setIsAlert",null,{root:!0});n("setFinalTotal",t.data.data.final_total),n("setCouponCode",e),n("setAlertMsg",t.data.message,{root:!0}),n("setIsAlert",null,{root:!0})})).catch((function(t){return console.log(t.message)}))},confirmOrder:function(t,e){var n=t.commit,o="".concat("https://vue-course-api.hexschool.io","/api/").concat("coffeebean","/order");v.a.post(o,{data:e}).then((function(t){if(!t.data.success)return n("setAlertMsg",t.data.message,{root:!0}),void n("setIsAlert",null,{root:!0});n("setOrderId",t.data.orderId),n("setAlertMsg",t.data.message,{root:!0}),n("setIsAlert",null,{root:!0})})).catch((function(t){return console.log(t.message)}))},getOrder:function(t,e){var n=t.commit,o="".concat("https://vue-course-api.hexschool.io","/api/").concat("coffeebean","/order/").concat(e);v.a.get(o).then((function(t){if(!t.data.success)return n("setAlertMsg","找不到訂單資訊",{root:!0}),void n("setIsAlert",null,{root:!0});n("setOrder",t.data.order)})).catch((function(t){return console.log(t.message)}))},confirmPay:function(t,e){var n=t.commit,o="".concat("https://vue-course-api.hexschool.io","/api/").concat("coffeebean","/pay/").concat(e);v.a.post(o).then((function(t){if(!t.data.success)return n("setAlertMsg","付款失敗",{root:!0}),void n("setIsAlert",null,{root:!0});n("setPaid",!0),n("setAlertMsg",t.data.message,{root:!0}),n("setIsAlert",null,{root:!0}),m()({title:"付款成功!",text:"再回去逛逛吧!",icon:"success",buttons:{goto:"回商城"}}).then((function(t){t&&n("setJumped",!0)}))})).catch((function(t){return console.log(t.message)}))}}},y=Object(g["a"])({state:{pagination:{},alertMsg:"",isAlert:!1,isLoading:!1},mutations:{setPagination:function(t,e){t.pagination=e},setAlertMsg:function(t,e){t.alertMsg=e,t.isAlert=!0},setIsAlert:function(t){setTimeout((function(){t.isAlert=!1}),1e3)},setIsLoading:function(t,e){t.isLoading=e}},actions:{},modules:{moduleAdmin:C,moduleFrontPage:A}}),I=n("2106"),k=n.n(I);n("77ed"),n("2cab"),n("7b17");l.beforeEach((function(t,e,n){if(t.meta.requiresAuth){var o="".concat("https://vue-course-api.hexschool.io","/api/user/check");v.a.post(o).then((function(t){return t.data.success?n():n({path:"/login"})})).catch((function(t){return console.log(t.message)}))}else n(),("List"!==t.name&&"Item"!==t.name||"all"===t.fullPath.split("/")[2])&&window.scroll(0,0)})),Object(o["createApp"])(c).use(y).use(l).use(k.a,v.a).mount("#app")},c1b5:function(t,e,n){"use strict";n("277b")}});
//# sourceMappingURL=app.js.map